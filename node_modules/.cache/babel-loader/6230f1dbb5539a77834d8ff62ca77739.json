{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/react-firechat-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Admin/Desktop/react-firechat-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import firebase from'firebase/app';import{useFirestoreQuery}from'../hooks';// Components\nimport Message from'./Message';var Channel=function Channel(_ref){var _messages$sort;var _ref$user=_ref.user,user=_ref$user===void 0?null:_ref$user;var db=firebase.firestore();var messagesRef=db.collection('messages');var messages=useFirestoreQuery(messagesRef.orderBy('createdAt','desc').limit(100));var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newMessage=_useState2[0],setNewMessage=_useState2[1];var inputRef=useRef();var bottomListRef=useRef();var uid=user.uid,displayName=user.displayName,photoURL=user.photoURL;useEffect(function(){if(inputRef.current){inputRef.current.focus();}},[inputRef]);var handleOnChange=function handleOnChange(e){setNewMessage(e.target.value);};var handleOnSubmit=function handleOnSubmit(e){e.preventDefault();var trimmedMessage=newMessage.trim();if(trimmedMessage){// Add new message in Firestore\nmessagesRef.add({text:trimmedMessage,createdAt:firebase.firestore.FieldValue.serverTimestamp(),uid:uid,displayName:displayName,photoURL:photoURL});// Clear input field\nsetNewMessage('');// Scroll down to the bottom of the list\nbottomListRef.current.scrollIntoView({behavior:'smooth'});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-4 max-w-screen-lg mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b dark:border-gray-600 border-gray-200 py-8 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-3xl text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:\"Welcome to\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-3\",children:\"G&E CHAT LIVE\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-center\",children:\"This is the beginning of this chat. Please avoid sensitive profanity\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:messages===null||messages===void 0?void 0:(_messages$sort=messages.sort(function(first,second){var _first$createdAt,_second$createdAt;return(first===null||first===void 0?void 0:(_first$createdAt=first.createdAt)===null||_first$createdAt===void 0?void 0:_first$createdAt.seconds)<=(second===null||second===void 0?void 0:(_second$createdAt=second.createdAt)===null||_second$createdAt===void 0?void 0:_second$createdAt.seconds)?-1:1;}))===null||_messages$sort===void 0?void 0:_messages$sort.map(function(message){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Message,_objectSpread({},message))},message.id);})}),/*#__PURE__*/_jsx(\"div\",{ref:bottomListRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 mx-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleOnSubmit,className:\"flex flex-row bg-gray-200 dark:bg-coolDark-400 rounded-md px-4 py-3 z-10 max-w-screen-lg mx-auto dark:text-white shadow-md\",children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",value:newMessage,onChange:handleOnChange,placeholder:\"Type your message here...\",className:\"flex-1 bg-transparent outline-none\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!newMessage,className:\"uppercase font-semibold text-sm tracking-wider text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors\",children:\"Send\"})]})})]});};export default Channel;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/react-firechat-master/src/components/Channel.js"],"names":["React","useEffect","useState","useRef","firebase","useFirestoreQuery","Message","Channel","user","db","firestore","messagesRef","collection","messages","orderBy","limit","newMessage","setNewMessage","inputRef","bottomListRef","uid","displayName","photoURL","current","focus","handleOnChange","e","target","value","handleOnSubmit","preventDefault","trimmedMessage","trim","add","text","createdAt","FieldValue","serverTimestamp","scrollIntoView","behavior","sort","first","second","seconds","map","message","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport firebase from 'firebase/app';\nimport { useFirestoreQuery } from '../hooks';\n// Components\nimport Message from './Message';\n\nconst Channel = ({ user = null }) => {\n  const db = firebase.firestore();\n  const messagesRef = db.collection('messages');\n  const messages = useFirestoreQuery(\n    messagesRef.orderBy('createdAt', 'desc').limit(100)\n  );\n\n  const [newMessage, setNewMessage] = useState('');\n\n  const inputRef = useRef();\n  const bottomListRef = useRef();\n\n  const { uid, displayName, photoURL } = user;\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [inputRef]);\n\n  const handleOnChange = e => {\n    setNewMessage(e.target.value);\n  };\n\n  const handleOnSubmit = e => {\n    e.preventDefault();\n\n    const trimmedMessage = newMessage.trim();\n    if (trimmedMessage) {\n      // Add new message in Firestore\n      messagesRef.add({\n        text: trimmedMessage,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        uid,\n        displayName,\n        photoURL,\n      });\n      // Clear input field\n      setNewMessage('');\n      // Scroll down to the bottom of the list\n      bottomListRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"overflow-auto h-full\">\n        <div className=\"py-4 max-w-screen-lg mx-auto\">\n          <div className=\"border-b dark:border-gray-600 border-gray-200 py-8 mb-4\">\n            <div className=\"font-bold text-3xl text-center\">\n              <p className=\"mb-1\">Welcome to</p>\n              <p className=\"mb-3\">G&E CHAT LIVE</p>\n            </div>\n            <p className=\"text-gray-400 text-center\">\n              This is the beginning of this chat.\n              Please avoid sensitive profanity\n            </p>\n          </div>\n          <ul>\n            {messages\n              ?.sort((first, second) =>\n                first?.createdAt?.seconds <= second?.createdAt?.seconds ? -1 : 1\n              )\n              ?.map(message => (\n                <li key={message.id}>\n                  <Message {...message} />\n                </li>\n              ))}\n          </ul>\n          <div ref={bottomListRef} />\n        </div>\n      </div>\n      <div className=\"mb-6 mx-4\">\n        <form\n          onSubmit={handleOnSubmit}\n          className=\"flex flex-row bg-gray-200 dark:bg-coolDark-400 rounded-md px-4 py-3 z-10 max-w-screen-lg mx-auto dark:text-white shadow-md\"\n        >\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={newMessage}\n            onChange={handleOnChange}\n            placeholder=\"Type your message here...\"\n            className=\"flex-1 bg-transparent outline-none\"\n          />\n          <button\n            type=\"submit\"\n            disabled={!newMessage}\n            className=\"uppercase font-semibold text-sm tracking-wider text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors\"\n          >\n            Send\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nChannel.propTypes = {\n  user: PropTypes.shape({\n    uid: PropTypes.string,\n    displayName: PropTypes.string,\n    photoURL: PropTypes.string,\n  }),\n};\n\nexport default Channel;\n"]},"metadata":{},"sourceType":"module"}